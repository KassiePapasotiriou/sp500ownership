<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Missing values | Exploration of the S&amp;P 500 stock ownership in Robinhood between Aug 2018 - Aug 2020</title>
  <meta name="description" content="Chapter 4 Missing values | Exploration of the S&amp;P 500 stock ownership in Robinhood between Aug 2018 - Aug 2020" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Missing values | Exploration of the S&amp;P 500 stock ownership in Robinhood between Aug 2018 - Aug 2020" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Missing values | Exploration of the S&amp;P 500 stock ownership in Robinhood between Aug 2018 - Aug 2020" />
  
  
  

<meta name="author" content="Jingwen Du, Kassiani Papasotiriou" />


<meta name="date" content="2020-12-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-transformation.html"/>
<link rel="next" href="results.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./"> S&P 500 stock ownership</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#raw-data"><i class="fa fa-check"></i><b>3.1</b> Raw data</a><ul>
<li class="chapter" data-level="3.1.1" data-path="data-transformation.html"><a href="data-transformation.html#robintrack-data"><i class="fa fa-check"></i><b>3.1.1</b> Robintrack data</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-transformation.html"><a href="data-transformation.html#sp500-stock-prices-and-volume"><i class="fa fa-check"></i><b>3.1.2</b> S&amp;P500 stock prices and volume</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-transformation.html"><a href="data-transformation.html#vix-and-mcap"><i class="fa fa-check"></i><b>3.1.3</b> VIX and Mcap</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-transformation.html"><a href="data-transformation.html#company-characteristics"><i class="fa fa-check"></i><b>3.1.4</b> Company characteristics</a></li>
<li class="chapter" data-level="3.1.5" data-path="data-transformation.html"><a href="data-transformation.html#combination-of-the-above"><i class="fa fa-check"></i><b>3.1.5</b> Combination of the above</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#further-preprocessing"><i class="fa fa-check"></i><b>3.2</b> Further preprocessing</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-transformation.html"><a href="data-transformation.html#clustering"><i class="fa fa-check"></i><b>3.2.1</b> Clustering</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#results-dataframes"><i class="fa fa-check"></i><b>3.3</b> <code>Results</code> dataframes</a><ul>
<li class="chapter" data-level="3.3.1" data-path="data-transformation.html"><a href="data-transformation.html#data.csv"><i class="fa fa-check"></i><b>3.3.1</b> <code>data.csv</code></a></li>
<li class="chapter" data-level="3.3.2" data-path="data-transformation.html"><a href="data-transformation.html#cleveland.csv"><i class="fa fa-check"></i><b>3.3.2</b> <code>cleveland.csv</code></a></li>
<li class="chapter" data-level="3.3.3" data-path="data-transformation.html"><a href="data-transformation.html#mosaic.csv"><i class="fa fa-check"></i><b>3.3.3</b> <code>mosaic.csv</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a><ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#overview-of-missing-values"><i class="fa fa-check"></i><b>4.1</b> Overview of missing values</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#visualizing-missing-values-per-row"><i class="fa fa-check"></i><b>4.2</b> Visualizing missing values per row</a></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#frequency-of-patterns"><i class="fa fa-check"></i><b>4.3</b> Frequency of patterns</a></li>
<li class="chapter" data-level="4.4" data-path="missing-values.html"><a href="missing-values.html#interpreting-the-results"><i class="fa fa-check"></i><b>4.4</b> Interpreting the results</a></li>
<li class="chapter" data-level="4.5" data-path="missing-values.html"><a href="missing-values.html#dealing-with-missing-values"><i class="fa fa-check"></i><b>4.5</b> Dealing with missing values</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a><ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#important-terms"><i class="fa fa-check"></i><b>5.1</b> Important terms</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#yearly-average-ownership-by-industry"><i class="fa fa-check"></i><b>5.2</b> Yearly average ownership by industry</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#ownership-by-company"><i class="fa fa-check"></i><b>5.3</b> Ownership by company</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#ownership-of-the-very_popular-companies"><i class="fa fa-check"></i><b>5.4</b> Ownership of the <code>very_popular</code> companies</a></li>
<li class="chapter" data-level="5.5" data-path="results.html"><a href="results.html#ownership-vs-founding-year"><i class="fa fa-check"></i><b>5.5</b> Ownership vs Founding Year</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploration of the S&amp;P 500 stock ownership in Robinhood between Aug 2018 - Aug 2020</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="missing-values" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> Missing values</h1>
<p>In this section we will explore the missing values in our dataset and offer some hypotheses on why this might be happening. We will also investigate if we have missing patterns and try to understand the cause behind that.</p>
<div id="overview-of-missing-values" class="section level2">
<h2><span class="header-section-number">4.1</span> Overview of missing values</h2>
<p>First we read in the raw data. We haven’t performed any tranformations to the dataframe apart from combining the different datasources.</p>
<p>In order to start exploring missing values we will look at the ratio of the number of NAs in each column:</p>
<pre><code>##          Date        Symbol     Adj.Close        Volume users_holding 
##   0.000000000   0.000000000   0.003158734   0.003158734   0.062136036 
## vix_Adj_close          Mcap 
##   0.003112053   0.022546827</code></pre>
<p>We can see immediately that we have a very low percentage in missing values. The columns in our dataframe that have the most missing entries are <code>Mcap</code> and <code>users_holding</code> with around 2% and 6% missing values respectively.</p>
</div>
<div id="visualizing-missing-values-per-row" class="section level2">
<h2><span class="header-section-number">4.2</span> Visualizing missing values per row</h2>
<p>One way of visualizing the missing patterns by row is by using the <strong>mi</strong> package. For the purposes of the visualization of this section, we first drop all rows that do not have missing values.</p>
<p>Since we have almost 21k missing values we randomly subsampled the missing values dataframe to create a smaller one. In order to get a first idea of the shape of the missing values we can take a look at the following graph:</p>
<pre><code>## NOTE: The following pairs of variables appear to have the same missingness pattern.
##  Please verify whether they are in fact logically distinct variables.
##      [,1]        [,2]           
## [1,] &quot;Adj.Close&quot; &quot;Volume&quot;       
## [2,] &quot;Adj.Close&quot; &quot;vix_Adj_close&quot;
## [3,] &quot;Volume&quot;    &quot;vix_Adj_close&quot;</code></pre>
<p><img src="finalproj_files/figure-html/qplot1-1.png" width="480" /></p>
<p>We can see that most missing values appear on the <code>users_holding</code> and <code>Mcap</code> columns and a combination of the two. Another block of missing values is formed with the following collums <code>Adj.Close</code>,<code>Volume</code>,<code>vix_Adj_close</code> and <code>users_holding</code>.</p>
<p>We realize that since this is a random sub-sample of the dataframe and that there might be more missing patterns. Nevertheless, the above graph captures the strongest missing-value trends.</p>
<p>Taking a closer look on those patterns:</p>
<pre><code>## NOTE: The following pairs of variables appear to have the same missingness pattern.
##  Please verify whether they are in fact logically distinct variables.
##      [,1]        [,2]    
## [1,] &quot;Adj.Close&quot; &quot;Volume&quot;</code></pre>
<pre><code>##                                            Mcap 
##                                            4702 
##                                   users_holding 
##                                           14079 
##                             users_holding, Mcap 
##                                            1094 
##                               Adj.Close, Volume 
##                                              12 
## Adj.Close, Volume, users_holding, vix_Adj_close 
##                                             800</code></pre>
<p>To summarize the above:</p>
<ol style="list-style-type: decimal">
<li><p>We can see standalone missing values for <code>users_holding</code> and <code>Mcap</code> with the highest counts.</p></li>
<li><p>There is a pattern when both <code>users_holding</code> and <code>Mcap</code> are missing.</p></li>
<li><p>Another pattern lies in missing <code>Adj.Close</code> and <code>Volume</code>.</p></li>
<li><p>The last pattern we observe is missing all of the following: <code>Adj.Close</code>, <code>Volume</code>, <code>users_holding</code>,<code>vix_Adj_close</code>.</p></li>
</ol>
</div>
<div id="frequency-of-patterns" class="section level2">
<h2><span class="header-section-number">4.3</span> Frequency of patterns</h2>
<p>We take another look at our missing patterns. Here, the rows represent a pattern and the columns represent the column level missing values. We have sorted the graph by most to least common missing pattern and the most to least common missing row.</p>
<p><img src="finalproj_files/figure-html/qplot2-1.png" width="576" /></p>
</div>
<div id="interpreting-the-results" class="section level2">
<h2><span class="header-section-number">4.4</span> Interpreting the results</h2>
<p><strong>Pattern 1</strong>: Missing <code>users_holding</code>:</p>
<p>In our opinion there is not really intuition on why <code>users_holding</code> is missing. We assume that the Robintrack didn’t report this variable on certain days.We assume that this value is missing completely at Random.</p>
<p><strong>Pattern 2</strong>: Missing <code>Mcap</code>:</p>
<p>Similarly for <code>Mcap</code>. We assume that it is missing completely at Random.</p>
<p><strong>Pattern 3</strong>: Missing <code>Mcap</code>and <code>users_holding</code>:
A combination of the above two explanations.</p>
<p><strong>Pattern 4</strong>: Missing <code>Adj.Close</code>, <code>Volume</code>, <code>users_holding</code> and<code>vix_Adj_close</code>:</p>
<p>This is a more meaningful pattern. Our hypothesis is that those entries are missing at the same time because the company was not part of the S&amp;P500 on those specific dates. Note we still have <code>Mcap</code> data because that is pulled from Bloomberg versus Yahoo Finance. Bloomberg can recognize a name change of ticker whereas Yahoo does not.</p>
<p><strong>Pattern 5</strong>: Missing <code>Adj.Close</code> and <code>Volume</code>:</p>
<p>Our assumption is that Yahoo Finance didn’t report these values. We have values for the VIX, Market Cap and users holding therefore we should also have values for <code>Adj.Close</code> and <code>Volume</code>.</p>
<p>We confirmed our assumption by comparing those missing dates against another source which had the correct values for those dates.</p>
</div>
<div id="dealing-with-missing-values" class="section level2">
<h2><span class="header-section-number">4.5</span> Dealing with missing values</h2>
<p>We decided to remove the rows that contained missing values.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-transformation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/KassiePapasotiriou/sp500ownership/edit/main/04-missing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/KassiePapasotiriou/sp500ownership/blob/main/04-missing.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
